{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;AAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,kEAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA,uDAAuD,SAAS;AAChE;AACA;AACA;AACA;AACA,iDAAiD,UAAU;AAC3D,kDAAkD,YAAY;AAC9D;AACA;AACA;AACA,oDAAoD,uBAAuB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,+DAAW;AACnC;AACA,2DAA2D,IAAI;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C;AACA;AACA;AACA,QAAQ,+DAAW;AACnB;AACA,QAAQ,kEAAc;AACtB;AACA;AACA;AACA;AACA;AACA,wBAAwB,+DAAW;AACnC;AACA,2DAA2D,IAAI;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C;AACA;AACA;AACA,QAAQ,+DAAW;AACnB;AACA,QAAQ,kEAAc;AACtB;AACA;AACA;AACA;AACA,wBAAwB,+DAAW;AACnC,2DAA2D,IAAI;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,+DAAW;AACnB;AACA,QAAQ,kEAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,+DAAe,MAAM,EAAC;;;;;;;;;;;;;ACtLwD;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,kEAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA,wDAAwD,UAAU;AAClE;AACA,oEAAoE,WAAW;AAC/E,iEAAiE,cAAc;AAC/E,2EAA2E,cAAc;AACzF;AACA;AACA;AACA;AACA;AACA,kEAAkE,YAAY;AAC9E;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iDAAiD;AAC5E;AACA,SAAS;AACT,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,+DAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,oBAAoB,+DAAW;AAC/B;AACA,oBAAoB,kEAAc;AAClC;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAAe,KAAK,EAAC;AACrB;AACA;AACA;;;;;;;;;;;;;;;;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;UChCA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;ACNmC;AACG;AACtC;AACA;AACA,IAAI,yDAAK;AACT,IAAI,2DAAM;AACV,CAAC,E","sources":["webpack://pulse/./src/js/modules/basket.js","webpack://pulse/./src/js/modules/main.js","webpack://pulse/./src/js/services/services.js","webpack://pulse/webpack/bootstrap","webpack://pulse/webpack/runtime/define property getters","webpack://pulse/webpack/runtime/hasOwnProperty shorthand","webpack://pulse/webpack/runtime/make namespace object","webpack://pulse/./src/js/index.js"],"sourcesContent":["import {getCartData, setCartData, showMiniBasket} from '../services/services';\r\n\r\nfunction basket(parent) {\r\n\r\n    'use strict';\r\n\r\n    if (document.querySelector('body').getAttribute('data-title') == 'basket') {\r\n    \r\n    // функция показа мини-корзины\r\n    showMiniBasket();     \r\n\r\n    // карточка товара\r\n    class ItemBasket {\r\n        constructor(id,[img, name, price, num]) {\r\n            this.id = id;\r\n            this.img = img;\r\n            this.name = name;\r\n            this.price = price;\r\n            this.num = num;\r\n        }\r\n\r\n        // помещаем на страницу\r\n        render() {\r\n            const div = document.createElement('div');\r\n            div.classList.add('basket__item');\r\n            div.setAttribute('data-id', `${this.id}`);\r\n\r\n            div.innerHTML = `\r\n            <div class=\"basket__item-left\">\r\n                <div class=\"basket__item-img\">\r\n                    <img src=\"${this.img}\" alt=\"headphones\">\r\n                </div>\r\n                <div class=\"basket__item-switch\">\r\n                    <img class=\"basket__item-minus\" src=\"icons/-.svg\" alt=\"Minus\">\r\n                    <div class=\"basket__item-number\">${this.num}</div>\r\n                    <img class=\"basket__item-plus\" src=\"icons/+.svg\" alt=\"plus\">\r\n                </div>    \r\n            </div>\r\n            <div class=\"basket__item-center\">\r\n                <div class=\"basket__item-name\">${this.name}</div>\r\n                <div class=\"basket__item-price\">${this.price} ₽</div>\r\n            </div>\r\n            <div class=\"basket__item-right\">\r\n                <img class=\"basket__item-delete\" src=\"icons/delete.svg\" alt=\"delete\">\r\n                <div class=\"basket__item-result\"> ${this.price * this.num} ₽</div>\r\n            </div>\r\n            `;\r\n            document.querySelector('.basket__items').append(div);    \r\n            }\r\n        }\r\n\r\n    // уменьшаем кол-во товара в sessionstorage и на странице\r\n    const minusGoods = (num) => {\r\n        // получаем корзину\r\n        let  cardData = getCartData();\r\n        // получаем айтем и его внутренности\r\n        const parent = document.querySelector(`[data-id=\"${num}\"]`),\r\n              sum = parent.querySelector('.basket__item-number'),\r\n              result = parent.querySelector('.basket__item-result');\r\n        \r\n        // уменьшаем кол-во на странице\r\n        sum.innerHTML -= 1;\r\n        // уменьшаем кол-во в корзине\r\n        cardData[num][3] -= 1;\r\n        // если товара меньше 0, убираем со страницы и из корзины\r\n        if (cardData[num][3] <= 0) {\r\n            delete cardData[num];\r\n            parent.remove();\r\n        }\r\n        // пересчитываем общую стоимость товара\r\n        result.innerHTML = `${sumItem(parent)} ₽`;\r\n        // пересчитываем общую стоимость\r\n        totalSum();\r\n        // перезаписываем данные в sessionstorage\r\n        setCartData(cardData);\r\n        // Обновляем мини-корзину\r\n        showMiniBasket();\r\n    };\r\n\r\n\r\n    const plusGoods = (num) => {\r\n        // получаем корзину\r\n        let  cardData = getCartData();\r\n        // получаем айтем и его внутренности\r\n        const parent = document.querySelector(`[data-id=\"${num}\"]`);\r\n\r\n        let sum = parent.querySelector('.basket__item-number'),\r\n            result = parent.querySelector('.basket__item-result');\r\n        \r\n        // уменьшаем кол-во на странице\r\n        sum.innerHTML++;\r\n        // уменьшаем кол-во в корзине\r\n        cardData[num][3] += 1;\r\n\r\n        // пересчитываем общую стоимость товара\r\n        result.innerHTML = `${sumItem(parent)} ₽`;\r\n        // пересчитываем общую стоимость\r\n        totalSum();\r\n        // перезаписываем данные в sessionstorage\r\n        setCartData(cardData);\r\n        // Обновляем мини-корзину\r\n        showMiniBasket();\r\n    };\r\n\r\n    const deleteGoods = (num) => {\r\n        // получаем корзину\r\n        let  cardData = getCartData();\r\n        const parent = document.querySelector(`[data-id=\"${num}\"]`);\r\n\r\n        // удаляем со страницы и облака\r\n        delete cardData[num];\r\n        parent.remove();\r\n        \r\n        // пересчитываем общую стоимость\r\n        totalSum();\r\n        // перезаписываем данные в sessionstorage\r\n        setCartData(cardData);\r\n        // Обновляем мини-корзину\r\n        showMiniBasket();\r\n    };\r\n\r\n    // подсчет общей стоимости товаров\r\n    const totalSum = () => {\r\n        const prices = document.querySelectorAll('.basket__item-result'),\r\n                total = document.querySelector('.basket__price');\r\n        \r\n        let sum = 0;\r\n        // перебираем все цены и складываем значение\r\n        prices.forEach(price => {\r\n            sum += +price.innerHTML.replace(/\\D/g, ''); \r\n        });\r\n        // помещаем значение на страницу\r\n        total.innerHTML = `${sum} ₽`;\r\n    };\r\n\r\n    // подсчет стоимости каждого товара\r\n    const sumItem = (parent) => {\r\n        const price = +parent.querySelector('.basket__item-price').innerHTML.replace(/\\D/g,''),\r\n                num = +parent.querySelector('.basket__item-number').innerHTML;\r\n\r\n        return price * num;\r\n    };\r\n\r\n    // создание карточек товаров\r\n    const createCards = () => {\r\n        const cardData = JSON.parse(sessionStorage.getItem('cart'));\r\n        for (let items in cardData) {\r\n            new ItemBasket(items, cardData[items]).render();\r\n        }\r\n        totalSum();\r\n\r\n    };\r\n    createCards();\r\n\r\n    // обработка событий по клику на плюс и минус\r\n    document.querySelector(parent).addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        const target = e.target;\r\n\r\n        // обработчик события\r\n        function addEvent(selector, func) {\r\n            if (target && target.classList.contains(selector.slice(1))) {\r\n                document.querySelectorAll(selector).forEach((btn, i) => {\r\n                    if (target == btn) {\r\n                        const num = document.querySelectorAll('.basket__item')[i].getAttribute('data-id');\r\n                        func(num);\r\n                        \r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        // навешиваем обработчики на кнопку плюс, минус и удалить товар\r\n        addEvent('.basket__item-minus', minusGoods);\r\n        addEvent('.basket__item-plus', plusGoods);\r\n        addEvent('.basket__item-delete', deleteGoods);\r\n\r\n    });\r\n    \r\n    }\r\n}\r\n\r\nexport default basket;\r\n","import {getCartData, setCartData, showMiniBasket} from '../services/services';\r\n \r\nfunction goods(parent) {\r\n    'use strict';\r\n\r\n    if (document.querySelector('body').getAttribute('data-title') == 'goods') {\r\n\r\n    showMiniBasket();\r\n\r\n     // карточки товаров\r\n    class Item {\r\n        constructor(id, img, name, price, oldPrice, discount, rating, parentSelector) {\r\n            this.id = id;\r\n            this.img = img;\r\n            this.name = name;\r\n            this.price = price;\r\n            this.oldPrice = oldPrice;\r\n            this.discount = discount;\r\n            this.rating = rating;\r\n            this.parent = document.querySelector(parentSelector);\r\n        }\r\n\r\n        // помещение карточки на страницу\r\n        render() {\r\n            const div = document.createElement('div');\r\n            div.classList.add('headphones__item');\r\n\r\n            div.innerHTML = `\r\n            <div class=\"headphones__img\">\r\n                        <img src=\"${this.img}\" alt=\"headphones\">\r\n                    </div>\r\n                    <div class=\"headphones__info\">\r\n                        <div class=\"headphones__name\">${this.name}</div>\r\n                        <div class=\"headphones__price\">\r\n                            <div class=\"headphones__price-actual\">${this.price}</div>\r\n                            <div class=\"headphones__price-old\">${this.oldPrice}</div>\r\n                            <!-- <div class=\"headphones__price-discount\">${this.discount}</div> -->\r\n                        </div>\r\n                        <div class=\"headphones__rating\">\r\n                            <a href=\"#\" class=\"headphones__rating-img\">\r\n                                <img src=\"icons/Vector.svg\" alt=\"star\">\r\n                            </a>\r\n                            <div class=\"headphones__rating-num\">${this.rating}</div>\r\n                        </div>\r\n                        <a href=\"#\" data-id=\"${this.id}\" class=\"headphones__buy\">Купить</a>\r\n                    </div>\r\n            `;\r\n            this.parent.append(div);\r\n        }\r\n}\r\n\r\n// получение данных о товаре из дб и помещение на страницу\r\n    const placeCards= (url, parent) => {\r\n        fetch(url)\r\n        .then(data => data.json())\r\n        .then(data => {\r\n            data.forEach(({id, img, name, price, oldPrice, discount, rating}) => {\r\n                new Item(id, img, name, price, oldPrice, discount, rating, parent).render();  \r\n        });\r\n        });\r\n    };\r\n    // Для наушников\r\n    placeCards('http://localhost:3000/headphones', '.headphones__wrapper');\r\n    // для беспроводных\r\n    placeCards('http://localhost:3000/wireless', '.wireless__wrapper');\r\n\r\n    // обработчик на кнопку\r\n    document.querySelector(parent).addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        const target = e.target;\r\n\r\n        if (target && target.classList.contains('headphones__buy')) {\r\n            // перебираем кнопки купить\r\n            document.querySelectorAll('.headphones__buy').forEach((btn,i) => {\r\n                if (target == btn) {\r\n                    // если кнопки совпадают получаем данные из корзины или создаем новый объект\r\n                    let cardData = getCartData() || {};\r\n                    // передаем айди нужного айтема и получаем его данные\r\n                    const obj = getData(i);\r\n                    // если айтем с таким айди уже есть, прибавляем +1\r\n                    if (cardData.hasOwnProperty(obj.id)) {\r\n                        cardData[obj.id][3] += 1;\r\n                        // если нет, создаем новый айтем в корзине\r\n                    } else {\r\n                        cardData[obj.id] = [obj.img, obj.name, obj.price, 1];\r\n                    }\r\n                    // перезаписываем данные в корзине\r\n                    setCartData(cardData);\r\n                    // Обновляем иконку корзины\r\n                    showMiniBasket();\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // получение данных выбранного товара\r\n    const getData = (num) => {\r\n        const item = document.querySelectorAll('.headphones__item'),\r\n\r\n        img = item[num].querySelector('.headphones__img img').getAttribute('src'),\r\n        name = item[num].querySelector('.headphones__name').innerHTML,\r\n        price = item[num].querySelector('.headphones__price-actual').innerHTML.replace(/\\D/g,''),\r\n        id = item[num].querySelector('.headphones__buy').getAttribute('data-id');\r\n        return {\r\n            img: img,\r\n            name: name,\r\n            price: price,\r\n            id: id\r\n        };\r\n    };\r\n\r\n        }\r\n    }\r\n\r\nexport default goods;\r\n\r\n\r\n\r\n","// получаем данные из Sessionstorage\r\nfunction getCartData() {\r\n    return JSON.parse(sessionStorage.getItem('cart'));\r\n}\r\n// Записываем данные в Sessionstorage\r\nfunction setCartData(item) {\r\n    sessionStorage.setItem('cart', JSON.stringify(item));\r\n    return false;\r\n}\r\n\r\n// обновляем мини-корзину\r\nfunction showMiniBasket() {\r\n    // получаем данные из корзины и саму корзину\r\n    const cardData = getCartData(),\r\n        miniBasket = document.querySelector('.header__num');\r\n    let sum = 0;\r\n\r\n    // суммируем количество товаров в корзине\r\n    for (let items in cardData) {\r\n        sum += cardData[items][3];\r\n    }\r\n\r\n    // если товаров больше 0, показываем элемент на странице\r\n    if (sum > 0) {\r\n        miniBasket.style.display = \"block\";\r\n    } else {\r\n        miniBasket.style.display = \"none\";\r\n\r\n    }\r\n    // помещаем сумму в элемент\r\n    miniBasket.innerHTML = sum;\r\n}\r\n\r\nexport {getCartData, setCartData, showMiniBasket};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import goods from './modules/main';\r\nimport basket from './modules/basket';\r\n\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n    goods('.headphones');\r\n    basket('.basket');\r\n});"],"names":[],"sourceRoot":""}